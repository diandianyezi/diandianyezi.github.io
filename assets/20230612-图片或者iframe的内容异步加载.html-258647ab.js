const n=JSON.parse(`{"key":"v-90758e66","path":"/article/20230612-%E5%9B%BE%E7%89%87%E6%88%96%E8%80%85iframe%E7%9A%84%E5%86%85%E5%AE%B9%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD.html","title":"图片或者iframe异步加载","lang":"zh-CN","frontmatter":{"title":"图片或者iframe异步加载","description":"图片或iframe异步加载 常用的方法：在页面滚动到图片位置或者iframe位置时，开始加载图片或者iframe内容； Iframe 的loading属性 IntersectionObserver setObserver(options) { let observer = new IntersectionObserver((entries) =&gt; { entries.forEach((entry) =&gt; { if (entry.isIntersecting) { const li = entry.target; const frame = li.querySelector('#auth-iframe'); const src = frame.getAttribute('data-src'); frame.setAttribute('src', src); observer.unobserve(li); } }); }, options); let targets = document.querySelectorAll('.protocol-pannel li.item'); targets.forEach((item) =&gt; { console.info('item', item); observer.observe(item); }); } // 调用 let options = { root: document.querySelector('.scroll-parent'), // 第一个可滚动的父元素 rootMargin: '0px', // threshold: 0.0 // }; this.setObserver(options);","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-v2-demo.netlify.app/article/20230612-%E5%9B%BE%E7%89%87%E6%88%96%E8%80%85iframe%E7%9A%84%E5%86%85%E5%AE%B9%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD.html"}],["meta",{"property":"og:site_name","content":"Yezi’s Blog"}],["meta",{"property":"og:title","content":"图片或者iframe异步加载"}],["meta",{"property":"og:description","content":"图片或iframe异步加载 常用的方法：在页面滚动到图片位置或者iframe位置时，开始加载图片或者iframe内容； Iframe 的loading属性 IntersectionObserver setObserver(options) { let observer = new IntersectionObserver((entries) =&gt; { entries.forEach((entry) =&gt; { if (entry.isIntersecting) { const li = entry.target; const frame = li.querySelector('#auth-iframe'); const src = frame.getAttribute('data-src'); frame.setAttribute('src', src); observer.unobserve(li); } }); }, options); let targets = document.querySelectorAll('.protocol-pannel li.item'); targets.forEach((item) =&gt; { console.info('item', item); observer.observe(item); }); } // 调用 let options = { root: document.querySelector('.scroll-parent'), // 第一个可滚动的父元素 rootMargin: '0px', // threshold: 0.0 // }; this.setObserver(options);"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-07-12T09:14:01.000Z"}],["meta",{"property":"article:modified_time","content":"2023-07-12T09:14:01.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"图片或者iframe异步加载\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-07-12T09:14:01.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Iframe 的loading属性","slug":"iframe-的loading属性","link":"#iframe-的loading属性","children":[]},{"level":2,"title":"IntersectionObserver","slug":"intersectionobserver","link":"#intersectionobserver","children":[]}],"git":{"createdTime":1686743547000,"updatedTime":1689153241000,"contributors":[{"name":"diandian","email":"1092923594@qq.com","commits":2}]},"readingTime":{"minutes":0.43,"words":129},"filePathRelative":"article/20230612-图片或者iframe的内容异步加载.md","localizedDate":"2023年6月14日","excerpt":"<h1> 图片或iframe异步加载</h1>\\n<p>常用的方法：在页面滚动到图片位置或者iframe位置时，开始加载图片或者iframe内容；</p>\\n<h2> Iframe 的loading属性</h2>\\n<h2> IntersectionObserver</h2>\\n<div class=\\"language-javascript line-numbers-mode\\" data-ext=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token function\\">setObserver</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">options</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">let</span> observer <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">IntersectionObserver</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">entries</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n        entries<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">forEach</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">entry</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>entry<span class=\\"token punctuation\\">.</span>isIntersecting<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">const</span> li <span class=\\"token operator\\">=</span> entry<span class=\\"token punctuation\\">.</span>target<span class=\\"token punctuation\\">;</span>\\n                <span class=\\"token keyword\\">const</span> frame <span class=\\"token operator\\">=</span> li<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">querySelector</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'#auth-iframe'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n                <span class=\\"token keyword\\">const</span> src <span class=\\"token operator\\">=</span> frame<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getAttribute</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'data-src'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n                frame<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">setAttribute</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'src'</span><span class=\\"token punctuation\\">,</span> src<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n                observer<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">unobserve</span><span class=\\"token punctuation\\">(</span>li<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span> options<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token keyword\\">let</span> targets <span class=\\"token operator\\">=</span> document<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">querySelectorAll</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'.protocol-pannel li.item'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    targets<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">forEach</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">item</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n        console<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">info</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'item'</span><span class=\\"token punctuation\\">,</span> item<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        observer<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">observe</span><span class=\\"token punctuation\\">(</span>item<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n<span class=\\"token comment\\">// 调用</span>\\n<span class=\\"token keyword\\">let</span> options <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token literal-property property\\">root</span><span class=\\"token operator\\">:</span> document<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">querySelector</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'.scroll-parent'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">// 第一个可滚动的父元素</span>\\n    <span class=\\"token literal-property property\\">rootMargin</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'0px'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">// </span>\\n    <span class=\\"token literal-property property\\">threshold</span><span class=\\"token operator\\">:</span> <span class=\\"token number\\">0.0</span> <span class=\\"token comment\\">//</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">setObserver</span><span class=\\"token punctuation\\">(</span>options<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{n as data};
