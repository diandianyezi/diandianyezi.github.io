const n=JSON.parse('{"key":"v-776eda71","path":"/article/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F.html","title":"前端路由的实现方式","lang":"zh-CN","frontmatter":{"title":"前端路由的实现方式","date":"2022-09-14T00:00:00.000Z","sidebar":"heading","breadcrumb":true,"lastUpdated":true,"contributors":true,"editLink":false,"category":"Javascript","tag":["路由"],"description":"前端路由的实现方式 主要实现方式有两种 hash模式 和 history模式。 路由概念 通过一定的机制，监听用户的行为动作，从而做出对应的变化。 Hash模式 通过监听url中的hash部分变化，做出对应的改变。 &lt;!DOCTYPE html&gt; &lt;html lang=\\"en\\"&gt; &lt;head&gt; &lt;meta charset=\\"UTF-8\\" /&gt; &lt;meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" /&gt; &lt;meta content=\\"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover\\" name=\\"viewport\\" /&gt; &lt;title&gt;实现简单的hash路由&lt;/title&gt; &lt;style&gt; * { margin: 0; padding: 0; box-sizing: border-box; } html, body { height: 100%; } #content { height: calc(100vh - 50px); display: flex; align-items: center; justify-content: center; font-size: 3em; } #nav { height: 50px; position: fixed; left: 0; bottom: 0; width: 100%; display: flex; } #nav a { width: 25%; display: flex; justify-content: center; align-items: center; border: 1px solid black; } #nav a:not(:last-of-type) { border-right: none; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;main id=\\"content\\"&gt;&lt;/main&gt; &lt;nav id=\\"nav\\"&gt; &lt;a href=\\"#/\\"&gt;首页&lt;/a&gt; &lt;a href=\\"#/shop\\"&gt;商城&lt;/a&gt; &lt;a href=\\"#/shopping-cart\\"&gt;购物车&lt;/a&gt; &lt;a href=\\"#/mine\\"&gt;我的&lt;/a&gt; &lt;/nav&gt; &lt;/body&gt; &lt;script&gt; class VueRouter { constructor(routes = []) { this.routes = routes; // 路由映射 this.currentHash = \\"\\"; // 当前的hash this.refresh = this.refresh.bind(this); window.addEventListener(\\"load\\", this.refresh, false); window.addEventListener(\\"hashchange\\", this.refresh, false); } getUrlPath(url) { // 获取hash return url.indexOf(\\"#\\") &gt;= 0 ? url.slice(url.indexOf(\\"#\\") + 1) : \\"/\\"; } refresh(event) { // URL hash发生改变的时候，拿到当前的hash let newHash = \\"\\", oldHash = null; if (event.newURL) { oldHash = this.getUrlPath(event.oldURL || \\"\\"); newHash = this.getUrlPath(event.newURL || \\"\\"); } else { newHash = this.getUrlPath(window.location.hash); } this.currentHash = newHash; this.matchComponent(); } matchComponent() { let curRoute = this.routes.find( (route) =&gt; route.path === this.currentHash ); if (!curRoute) { // 当前URL中的hash不存在的时候，默认取第一个，当然真实场景下，可能会有各种情况，取决于业务逻辑 curRoute = this.routes.find((route) =&gt; route.path === \\"/\\"); } const { component } = curRoute; document.querySelector(\\"#content\\").innerHTML = component; } } const router = new VueRouter([ { path: \\"/\\", name: \\"home\\", component: \\"&lt;div&gt;首页内容&lt;/div&gt;\\" }, { path: \\"/shop\\", name: \\"shop\\", component: \\"&lt;div&gt;商城内容&lt;/div&gt;\\" }, { path: \\"/shopping-cart\\", name: \\"shopping-cart\\", component: \\"&lt;div&gt;购物车内容&lt;/div&gt;\\" }, { path: \\"/mine\\", name: \\"mine\\", component: \\"&lt;div&gt;我的内容&lt;/div&gt;\\" } ]); &lt;/script&gt; &lt;/html&gt;","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-v2-demo.netlify.app/article/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F.html"}],["meta",{"property":"og:site_name","content":"Yezi’s Blog"}],["meta",{"property":"og:title","content":"前端路由的实现方式"}],["meta",{"property":"og:description","content":"前端路由的实现方式 主要实现方式有两种 hash模式 和 history模式。 路由概念 通过一定的机制，监听用户的行为动作，从而做出对应的变化。 Hash模式 通过监听url中的hash部分变化，做出对应的改变。 &lt;!DOCTYPE html&gt; &lt;html lang=\\"en\\"&gt; &lt;head&gt; &lt;meta charset=\\"UTF-8\\" /&gt; &lt;meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" /&gt; &lt;meta content=\\"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover\\" name=\\"viewport\\" /&gt; &lt;title&gt;实现简单的hash路由&lt;/title&gt; &lt;style&gt; * { margin: 0; padding: 0; box-sizing: border-box; } html, body { height: 100%; } #content { height: calc(100vh - 50px); display: flex; align-items: center; justify-content: center; font-size: 3em; } #nav { height: 50px; position: fixed; left: 0; bottom: 0; width: 100%; display: flex; } #nav a { width: 25%; display: flex; justify-content: center; align-items: center; border: 1px solid black; } #nav a:not(:last-of-type) { border-right: none; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;main id=\\"content\\"&gt;&lt;/main&gt; &lt;nav id=\\"nav\\"&gt; &lt;a href=\\"#/\\"&gt;首页&lt;/a&gt; &lt;a href=\\"#/shop\\"&gt;商城&lt;/a&gt; &lt;a href=\\"#/shopping-cart\\"&gt;购物车&lt;/a&gt; &lt;a href=\\"#/mine\\"&gt;我的&lt;/a&gt; &lt;/nav&gt; &lt;/body&gt; &lt;script&gt; class VueRouter { constructor(routes = []) { this.routes = routes; // 路由映射 this.currentHash = \\"\\"; // 当前的hash this.refresh = this.refresh.bind(this); window.addEventListener(\\"load\\", this.refresh, false); window.addEventListener(\\"hashchange\\", this.refresh, false); } getUrlPath(url) { // 获取hash return url.indexOf(\\"#\\") &gt;= 0 ? url.slice(url.indexOf(\\"#\\") + 1) : \\"/\\"; } refresh(event) { // URL hash发生改变的时候，拿到当前的hash let newHash = \\"\\", oldHash = null; if (event.newURL) { oldHash = this.getUrlPath(event.oldURL || \\"\\"); newHash = this.getUrlPath(event.newURL || \\"\\"); } else { newHash = this.getUrlPath(window.location.hash); } this.currentHash = newHash; this.matchComponent(); } matchComponent() { let curRoute = this.routes.find( (route) =&gt; route.path === this.currentHash ); if (!curRoute) { // 当前URL中的hash不存在的时候，默认取第一个，当然真实场景下，可能会有各种情况，取决于业务逻辑 curRoute = this.routes.find((route) =&gt; route.path === \\"/\\"); } const { component } = curRoute; document.querySelector(\\"#content\\").innerHTML = component; } } const router = new VueRouter([ { path: \\"/\\", name: \\"home\\", component: \\"&lt;div&gt;首页内容&lt;/div&gt;\\" }, { path: \\"/shop\\", name: \\"shop\\", component: \\"&lt;div&gt;商城内容&lt;/div&gt;\\" }, { path: \\"/shopping-cart\\", name: \\"shopping-cart\\", component: \\"&lt;div&gt;购物车内容&lt;/div&gt;\\" }, { path: \\"/mine\\", name: \\"mine\\", component: \\"&lt;div&gt;我的内容&lt;/div&gt;\\" } ]); &lt;/script&gt; &lt;/html&gt;"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-10-31T01:45:43.000Z"}],["meta",{"property":"article:tag","content":"路由"}],["meta",{"property":"article:published_time","content":"2022-09-14T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2022-10-31T01:45:43.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"前端路由的实现方式\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-09-14T00:00:00.000Z\\",\\"dateModified\\":\\"2022-10-31T01:45:43.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":3,"title":"路由概念","slug":"路由概念","link":"#路由概念","children":[]},{"level":3,"title":"Hash模式","slug":"hash模式","link":"#hash模式","children":[]},{"level":3,"title":"History模式","slug":"history模式","link":"#history模式","children":[]}],"git":{"createdTime":1663151617000,"updatedTime":1667180743000,"contributors":[{"name":"zhangting5","email":"zhangting5@xiaomi.xom","commits":2}]},"readingTime":{"minutes":2.52,"words":756},"filePathRelative":"article/前端路由的实现方式.md","localizedDate":"2022年9月14日","excerpt":"<h1> 前端路由的实现方式</h1>\\n<p>主要实现方式有两种 hash模式 和 history模式。</p>\\n<h3> 路由概念</h3>\\n<p>通过一定的机制，监听用户的行为动作，从而做出对应的变化。</p>\\n<h3> Hash模式</h3>\\n<p>通过监听url中的hash部分变化，做出对应的改变。</p>\\n<div class=\\"language-html line-numbers-mode\\" data-ext=\\"html\\"><pre class=\\"language-html\\"><code><span class=\\"token doctype\\"><span class=\\"token punctuation\\">&lt;!</span><span class=\\"token doctype-tag\\">DOCTYPE</span> <span class=\\"token name\\">html</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>html</span> <span class=\\"token attr-name\\">lang</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>en<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>head</span><span class=\\"token punctuation\\">&gt;</span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>meta</span> <span class=\\"token attr-name\\">charset</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>UTF-8<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token punctuation\\">/&gt;</span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>meta</span> <span class=\\"token attr-name\\">http-equiv</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>X-UA-Compatible<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">content</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>IE=edge<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token punctuation\\">/&gt;</span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>meta</span>\\n      <span class=\\"token attr-name\\">content</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover<span class=\\"token punctuation\\">\\"</span></span>\\n      <span class=\\"token attr-name\\">name</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>viewport<span class=\\"token punctuation\\">\\"</span></span>\\n    <span class=\\"token punctuation\\">/&gt;</span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>title</span><span class=\\"token punctuation\\">&gt;</span></span>实现简单的hash路由<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>title</span><span class=\\"token punctuation\\">&gt;</span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>style</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token style\\"><span class=\\"token language-css\\">\\n      <span class=\\"token selector\\">*</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token property\\">margin</span><span class=\\"token punctuation\\">:</span> 0<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">padding</span><span class=\\"token punctuation\\">:</span> 0<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">box-sizing</span><span class=\\"token punctuation\\">:</span> border-box<span class=\\"token punctuation\\">;</span>\\n      <span class=\\"token punctuation\\">}</span>\\n      <span class=\\"token selector\\">html,\\n      body</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token property\\">height</span><span class=\\"token punctuation\\">:</span> 100%<span class=\\"token punctuation\\">;</span>\\n      <span class=\\"token punctuation\\">}</span>\\n      <span class=\\"token selector\\">#content</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token property\\">height</span><span class=\\"token punctuation\\">:</span> <span class=\\"token function\\">calc</span><span class=\\"token punctuation\\">(</span>100vh - 50px<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">display</span><span class=\\"token punctuation\\">:</span> flex<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">align-items</span><span class=\\"token punctuation\\">:</span> center<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">justify-content</span><span class=\\"token punctuation\\">:</span> center<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">font-size</span><span class=\\"token punctuation\\">:</span> 3em<span class=\\"token punctuation\\">;</span>\\n      <span class=\\"token punctuation\\">}</span>\\n      <span class=\\"token selector\\">#nav</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token property\\">height</span><span class=\\"token punctuation\\">:</span> 50px<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">position</span><span class=\\"token punctuation\\">:</span> fixed<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">left</span><span class=\\"token punctuation\\">:</span> 0<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">bottom</span><span class=\\"token punctuation\\">:</span> 0<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">width</span><span class=\\"token punctuation\\">:</span> 100%<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">display</span><span class=\\"token punctuation\\">:</span> flex<span class=\\"token punctuation\\">;</span>\\n      <span class=\\"token punctuation\\">}</span>\\n      <span class=\\"token selector\\">#nav a</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token property\\">width</span><span class=\\"token punctuation\\">:</span> 25%<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">display</span><span class=\\"token punctuation\\">:</span> flex<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">justify-content</span><span class=\\"token punctuation\\">:</span> center<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">align-items</span><span class=\\"token punctuation\\">:</span> center<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token property\\">border</span><span class=\\"token punctuation\\">:</span> 1px solid black<span class=\\"token punctuation\\">;</span>\\n      <span class=\\"token punctuation\\">}</span>\\n      <span class=\\"token selector\\">#nav a:not(:last-of-type)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token property\\">border-right</span><span class=\\"token punctuation\\">:</span> none<span class=\\"token punctuation\\">;</span>\\n      <span class=\\"token punctuation\\">}</span>\\n    </span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>style</span><span class=\\"token punctuation\\">&gt;</span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>head</span><span class=\\"token punctuation\\">&gt;</span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>body</span><span class=\\"token punctuation\\">&gt;</span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>main</span> <span class=\\"token attr-name\\">id</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>content<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>main</span><span class=\\"token punctuation\\">&gt;</span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>nav</span> <span class=\\"token attr-name\\">id</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>nav<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span>\\n      <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>a</span> <span class=\\"token attr-name\\">href</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>#/<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span>首页<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>a</span><span class=\\"token punctuation\\">&gt;</span></span>\\n      <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>a</span> <span class=\\"token attr-name\\">href</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>#/shop<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span>商城<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>a</span><span class=\\"token punctuation\\">&gt;</span></span>\\n      <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>a</span> <span class=\\"token attr-name\\">href</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>#/shopping-cart<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span>购物车<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>a</span><span class=\\"token punctuation\\">&gt;</span></span>\\n      <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>a</span> <span class=\\"token attr-name\\">href</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>#/mine<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span>我的<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>a</span><span class=\\"token punctuation\\">&gt;</span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>nav</span><span class=\\"token punctuation\\">&gt;</span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>body</span><span class=\\"token punctuation\\">&gt;</span></span>\\n  <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n    <span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">VueRouter</span> <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token function\\">constructor</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">routes <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span></span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>routes <span class=\\"token operator\\">=</span> routes<span class=\\"token punctuation\\">;</span> <span class=\\"token comment\\">// 路由映射</span>\\n        <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>currentHash <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"\\"</span><span class=\\"token punctuation\\">;</span> <span class=\\"token comment\\">// 当前的hash</span>\\n        <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>refresh <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">refresh</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">bind</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        window<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addEventListener</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"load\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>refresh<span class=\\"token punctuation\\">,</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        window<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addEventListener</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"hashchange\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>refresh<span class=\\"token punctuation\\">,</span> <span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n      <span class=\\"token punctuation\\">}</span>\\n\\n      <span class=\\"token function\\">getUrlPath</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">url</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// 获取hash</span>\\n        <span class=\\"token keyword\\">return</span> url<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">indexOf</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"#\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">&gt;=</span> <span class=\\"token number\\">0</span> <span class=\\"token operator\\">?</span> url<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">slice</span><span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">indexOf</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"#\\"</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">+</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"/\\"</span><span class=\\"token punctuation\\">;</span>\\n      <span class=\\"token punctuation\\">}</span>\\n\\n      <span class=\\"token function\\">refresh</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">event</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token comment\\">// URL hash发生改变的时候，拿到当前的hash</span>\\n        <span class=\\"token keyword\\">let</span> newHash <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"\\"</span><span class=\\"token punctuation\\">,</span>\\n          oldHash <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">null</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>event<span class=\\"token punctuation\\">.</span>newURL<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n          oldHash <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getUrlPath</span><span class=\\"token punctuation\\">(</span>event<span class=\\"token punctuation\\">.</span>oldURL <span class=\\"token operator\\">||</span> <span class=\\"token string\\">\\"\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n          newHash <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getUrlPath</span><span class=\\"token punctuation\\">(</span>event<span class=\\"token punctuation\\">.</span>newURL <span class=\\"token operator\\">||</span> <span class=\\"token string\\">\\"\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n          newHash <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getUrlPath</span><span class=\\"token punctuation\\">(</span>window<span class=\\"token punctuation\\">.</span>location<span class=\\"token punctuation\\">.</span>hash<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>currentHash <span class=\\"token operator\\">=</span> newHash<span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">matchComponent</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n      <span class=\\"token punctuation\\">}</span>\\n\\n      <span class=\\"token function\\">matchComponent</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">let</span> curRoute <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>routes<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">find</span><span class=\\"token punctuation\\">(</span>\\n          <span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">route</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> route<span class=\\"token punctuation\\">.</span>path <span class=\\"token operator\\">===</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>currentHash\\n        <span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span><span class=\\"token operator\\">!</span>curRoute<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n          <span class=\\"token comment\\">// 当前URL中的hash不存在的时候，默认取第一个，当然真实场景下，可能会有各种情况，取决于业务逻辑</span>\\n          curRoute <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>routes<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">find</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">route</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> route<span class=\\"token punctuation\\">.</span>path <span class=\\"token operator\\">===</span> <span class=\\"token string\\">\\"/\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token keyword\\">const</span> <span class=\\"token punctuation\\">{</span> component <span class=\\"token punctuation\\">}</span> <span class=\\"token operator\\">=</span> curRoute<span class=\\"token punctuation\\">;</span>\\n        document<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">querySelector</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"#content\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>innerHTML <span class=\\"token operator\\">=</span> component<span class=\\"token punctuation\\">;</span>\\n      <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token keyword\\">const</span> router <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">VueRouter</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span>\\n      <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">path</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"/\\"</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">name</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"home\\"</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">component</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"&lt;div&gt;首页内容&lt;/div&gt;\\"</span>\\n      <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">path</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"/shop\\"</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">name</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"shop\\"</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">component</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"&lt;div&gt;商城内容&lt;/div&gt;\\"</span>\\n      <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">path</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"/shopping-cart\\"</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">name</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"shopping-cart\\"</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">component</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"&lt;div&gt;购物车内容&lt;/div&gt;\\"</span>\\n      <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n      <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">path</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"/mine\\"</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">name</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"mine\\"</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">component</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">\\"&lt;div&gt;我的内容&lt;/div&gt;\\"</span>\\n      <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n  </span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>html</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{n as data};
