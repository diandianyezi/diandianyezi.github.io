---
  title: Rust数据类型
  date: 2023-03-15
  sidebar: heading
  breadcrumb: true
  lastUpdated: true
  contributors: true
  editLink: false
  category: Rust
  tag:
    - Rust
---
# 数据类型

两种不同的数据类型子集：标量类型 scalar 和 复合类型 compound

## 标量类型

标量类型是单个值类型的统称。Rust内置了4种基础的标量类型：整数、浮点数、布尔值及字符。

### 整型

有符号类型`signed`（可以存储正数或负数） 无符号类型`usigned`只能存储正数

  按存储空间来说，划分为1字节 2字节 4字节 8字节 16字节，1字节= 8位

整型的长度还可以是`arch`。`arch`是由CPU架构决定的大小的整数类型，大小为`arch`的整数在x86机器上为32位，在x64的机器上为64位。



整型取值范围：

有符号能存储的最小值为 `-(2 ^(n-1))`，能够存储的最大值为 `2 ^ (n-1) - 1`

无符号整型能够存储的最小值为0，能够存储的最大值为`2^n - 1`

​	

### 浮点型

按照存储大小，分为f32和f64，其中f64为默认的浮点类型。

- f32为单精度浮点型
- f64为双精度浮点型，默认为双精度浮点型

> Rust中不能将0.0赋值给任已一个整型，也不能将0赋值给任一个浮点型。



###### _ 下划线

当数值很大的时候，使用_，使得数字的可读性更好

```rust
let price = 1_000_000;
let price2 = 1_000_000.2222;
```

### 布尔型和字符型

- char类型：占4字节，字符类型，是字符串的基本组成，单个字符或字，使用`UTF-8`作为底层编码而不是常见的`ASCII`作为底层编码，包含数字、字母、Unicode和其他特殊字符，使用单引号指定。
- 布尔类型

```rust
let checked:boolean = true;
let ch:char = 'Y';
```

## 复合类型

可以将多个不同类型的值组合为一个类型。Rust内置了两种基础的复合类型：元祖tuple 和数组 array。



### 元组类型

可以将其他不同类型的多个值组合进一个复合类型中。元组还拥有一个固定的长度：你无法在声明结束后增加或减少其中的元素数量。

元组每个位置的值都有一个类型，这些类型不需要是相同的。

```rust
fn main() {
  let tup = (500, 6.6, 1);
  let (x,y,z) = tup; // 解构元组
  // 还可以使用.访问元组里的值
  // tup.0  tup.1  tup.2
  println!("x is {},y is {},z is {}", x,y,z);
}
```

### 数组类型

与元组不同的是，数组的每个元素必须是相同的类型。Rust中的数组拥有固定的长度，一旦声明就不能随意更改大小。Rust也提供了更加灵活的动态数据`vector`，动态数据是一个类似于数组的几个结构，但它允许用户自由地调整数组长度。

```rust
let arr: [i32, 5] = [1,2,3,4,5];
// 
let arr2 = [3;5]; // 声明了含有相同元素3的长度为5的数组。

// 数组访问
let first = arr[0]
```

#### 非法的数组元素访问

可以顺利通过编译，但会在运行时因为错误而崩溃退出。

每次通过索引来访问一个元素时，Rust都会检查这个索引是否小于当前数组的长度。假如索引超出了当前数组的长度，Rust就会发生panic。
