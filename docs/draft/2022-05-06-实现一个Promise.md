## Promise

参考[Promise](https://es6.ruanyifeng.com/#docs/promise)

优点：避免了层层嵌套的回调函数，提供统一的接口，使得控制异步操作变得容易

缺点：

- 无法取消Promise，一旦建立就会立即执行无法中途取消
- 不设置回调函数，内部抛出的错误不会反应到外部。
- 处于pending时，无法得知目前进展到哪一个阶段

一个Promise必然处于以下几种状态之一：

- 等待 `Pending`：初始状态

- 成功 `fullfilled`：意味着操作成功完成

- 失败 `rejectd`：意味着操作失败，当promise内的操作失败时，会变成rejected。**一般来说，不要在`then()`方法里面定义 Reject 状态的回调函数（即`then`的第二个参数），总是使用`catch`方法。**

    ```js
    const promise = new Promise(function(resolve, reject) {
      const a = 1
      a = 3
    });
    promise.catch(function(error) {
      console.log(error);
    });
    
    console.info(promise)
    ```

    ![image-20220506142415694](https://raw.githubusercontent.com/diandianyezi/typora-images/master/img/image-20220506142415694.png)

原生Promise

```js
var p0 = new Promise((resolve,reject) => {
})
var p1 = new Promise((resolve,reject) => {
    resolve('成功')
})
var p2 = new Promise((resolve,reject) => {
  reject('失败')
})
var p3 = new Promise((resolve,reject) => {
  resolve('成功')
  reject('失败')
})
 
console.log(p0, p1, p2, p3)
```

通过输出结果 我们可以总结出：

- 当没有执行`resolve`或者`reject`时，promise为pending状态
- 状态只能由`pending`变为`fullfilled`或者`rejected`且一旦发生改变便不可二次修改

------

实现自己的`Promise`

